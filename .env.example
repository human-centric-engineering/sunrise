# Environment Configuration Template
#
# This file serves as a template for environment variables.
# Copy this file to .env.local and fill in your actual values.
#
# IMPORTANT: Never commit .env.local or .env files - they contain secrets!
#
# For detailed documentation, see:
# - .context/environment/overview.md - Setup guide and patterns
# - .context/environment/reference.md - Complete variable reference
#
# Quick setup:
#   1. cp .env.example .env.local
#   2. Update values below with your configuration
#   3. Generate secrets: openssl rand -base64 32
#   4. Start dev server: npm run dev

# Database (Required)
# PostgreSQL connection string for Prisma ORM
# Format: postgresql://[user]:[password]@[host]:[port]/[database]
# Docker: Use service name 'db' instead of 'localhost'
DATABASE_URL="postgresql://user:password@localhost:5432/sunrise"

# Better Auth (Required)
# Application base URL - must match where app is accessed
BETTER_AUTH_URL="http://localhost:3000"

# Secret for JWT signing - must be 32+ characters
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET="generate-with-openssl-rand-base64-32"

# OAuth - Google (Optional)
# Get credentials from https://console.cloud.google.com/
# Both values required to enable Google OAuth
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# Email - Resend (Optional for Phase 1, Required for Phase 3)
# Get API key from https://resend.com/
RESEND_API_KEY="your-resend-api-key"
EMAIL_FROM="noreply@yourdomain.com"
# Optional: Display name for sender (e.g., "Sunrise" produces "Sunrise <noreply@yourdomain.com>")
EMAIL_FROM_NAME="My app name"
# Optional: Separate email for contact form notifications (defaults to EMAIL_FROM)
# CONTACT_EMAIL="contact@yourdomain.com"

# Email verification (optional)
# If not set, defaults to true in production and false in development
# Set explicitly to override environment-based behavior
# REQUIRE_EMAIL_VERIFICATION=true

# File Storage (Optional)
# Provider selection: s3 | vercel-blob | local
# - Not set: Auto-detects from available credentials, falls back to local in dev
# - local: Uses public/uploads/ directory (development only)
# - s3: AWS S3 or S3-compatible storage (MinIO, DigitalOcean Spaces, Cloudflare R2)
# - vercel-blob: Vercel Blob Storage
# STORAGE_PROVIDER=

# S3 Configuration (required if using S3)
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-access-key
# S3_SECRET_ACCESS_KEY=your-secret-key
# Optional: For S3-compatible services (MinIO, DO Spaces, Cloudflare R2)
# S3_ENDPOINT=https://your-endpoint.com
# S3_PUBLIC_URL_BASE=https://cdn.yourdomain.com
# Optional: Set to true for legacy buckets that use ACLs for public access
# Modern buckets should use bucket policies instead (ACLs disabled by default since 2023)
# S3_USE_ACL=false

# Vercel Blob Configuration (required if using Vercel Blob)
# Get token from Vercel Dashboard > Storage > Blob
# BLOB_READ_WRITE_TOKEN=vercel_blob_...

# File Upload Settings
# Maximum file size in megabytes (default: 5)
# MAX_FILE_SIZE_MB=5

# App Configuration (Required)
# Environment: development | production | test
NODE_ENV="development"

# Public app URL - embedded at build time, accessible in client code
# Must match BETTER_AUTH_URL for consistency
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Logging Configuration (Optional)
# Log level: debug | info | warn | error
# Defaults: "debug" in development, "info" in production
# - debug: All logs including verbose debugging info
# - info: General application flow and important events
# - warn: Warning messages for degraded states
# - error: Only errors that need attention
# LOG_LEVEL="info"

# PII Sanitization (GDPR Compliance)
# Controls whether PII (emails, names, phone numbers, IPs) are redacted in logs
# - Not set: Auto (sanitize in production, show in development)
# - true: Always sanitize PII (recommended for GDPR/CCPA compliance)
# - false: Never sanitize PII (use with caution in production)
# Note: Secrets (passwords, tokens, API keys) are ALWAYS redacted regardless
# LOG_SANITIZE_PII=true

# Security - CORS Configuration (Optional)
# Comma-separated list of origins allowed to make cross-origin requests
# - Not set: Same-origin only (most secure default)
# - Development: localhost variants are auto-allowed even if unset
# - Production: Only explicitly listed origins are allowed
# Examples:
#   ALLOWED_ORIGINS="https://app.example.com"
#   ALLOWED_ORIGINS="https://app.example.com,https://mobile.example.com"
# ALLOWED_ORIGINS=

# Performance Monitoring (Optional)
# Threshold in ms above which operations are logged as warnings (default: 1000)
# PERF_SLOW_THRESHOLD_MS=1000

# Threshold in ms above which operations trigger Sentry alerts (default: 5000)
# PERF_CRITICAL_THRESHOLD_MS=5000

# Health Check Configuration (Optional)
# Whether to include memory stats in health check response (default: false)
# Note: Disable in production if memory info is sensitive
# HEALTH_INCLUDE_MEMORY=false

# Cookie Consent Banner (Optional)
# Set to false to disable the cookie consent banner entirely
# Default: true (banner enabled)
# NEXT_PUBLIC_COOKIE_CONSENT_ENABLED=true

# Error Tracking - Sentry (Optional)
# Get DSN from https://sentry.io/
# When set, errors are sent to Sentry. When not set, errors are logged only.
# NEXT_PUBLIC_SENTRY_DSN=

# For source map uploads (optional, improves error stack traces)
# SENTRY_AUTH_TOKEN=

# ============================================================
# DOCKER CONFIGURATION
# ============================================================
# These additional variables are used by Docker Compose for
# production deployments. They are optional for local development.

# Docker Database Configuration (Production)
# Used by docker-compose.prod.yml to create PostgreSQL container
# Set these when deploying with Docker in production
# DB_USER="postgres"
# DB_PASSWORD="your-secure-password-here"
# DB_NAME="sunrise"

# Important: Database Host Names
# - Local development (npm run dev): localhost
#   DATABASE_URL="postgresql://user:password@localhost:5432/sunrise"
#
# - Docker development (docker-compose up): db (service name)
#   DATABASE_URL="postgresql://postgres:postgres@db:5432/sunrise"
#
# - Docker production: db (service name) or external host
#   DATABASE_URL="postgresql://user:password@db:5432/sunrise"

# Docker Usage Examples:
#
# Development:
#   docker-compose up                    # Start dev environment
#   docker-compose down                  # Stop dev environment
#
# Production:
#   cp .env.example .env                 # Create production .env
#   # Edit .env with production values
#   docker-compose -f docker-compose.prod.yml up -d --build
#   docker-compose -f docker-compose.prod.yml exec web npx prisma migrate deploy
